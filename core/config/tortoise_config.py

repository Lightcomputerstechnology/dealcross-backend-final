# core/config/tortoise_config.py

from config.settings import settings  # âœ… Use unified settings

# Construct the effective DATABASE_URL consistently
DATABASE_URL = settings.get_effective_database_url()

TORTOISE_ORM = {
    "connections": {"default": DATABASE_URL},
    "apps": {
        "models": [
            "models",          # Your main models
            "aerich.models"    # Required for Aerich migrations tracking
        ],
        "default_connection": "default",
    },
}